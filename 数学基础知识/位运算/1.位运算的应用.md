# 位运算的应用

位运算一般有三种作用：

1. 高效地进行某些运算，代替其它低效的方式。
2. **表示集合**(常用于 **状态压缩DP**)。
3. 题目本来就要求使用位运算，或者适合使用位运算中某种运算的性质。

位运算代替其他运算方式很多时候并不能带来太大的优化，反而会使代码复杂，但是像**“乘 2 的非负整数次幂”和“除以 2 的非负整数次幂”就最好使用位运算，因为此时使用位运算可以优化复杂度。**



## 一、乘以/除以2的非负整数次幂

```c++
n << m; // n * (2 ^ m)
n >> m; //n / (2 ^ m)
```

补充一个小技巧：

**判断一个数是不是2的正整数次幂：**

```c++
if (n > 0 && (n & (n - 1)) == 0)
// 如果n是2的正整数次幂，那么n和n-1就是互为补集
```

**获取一个数字的二进制的某一位：**

```c++
// 获取a的第b位
(a >> b) & 1
```



## 二、异或运算的妙用

相同数字进行异或的结果是0，并且异或的逆运算是本身，因此，可以使用异或运算找到一堆数字中仅存的一个/两个只出现一次，其他元素都出现了偶数次的元素。



## 三、表示集合

**一个数的二进制表示可以看作是一个集合(0表示不在集合中，1表示在集合中)。**而对应的位运算就可以看作是对集合进行的操作。

| 操作   | 集合表示         | 位运算表示 |
| ------ | ---------------- | ---------- |
| 交集   | $a \cap b$       | `a & b`    |
| 并集   | $a \cup b$       | `a | b`    |
| 补集   | $\bar{a}$        | `~a`       |
| 差集   | $a \cap \bar{b}$ | `a & (~b)` |
| 对称差 | $a \triangle b$  | `a ^ b`    |

### 1.遍历某个集合的子集

```c++
// 遍历 u 的非空子集
for (int s = u; s; s = (s - 1) & u) {
  // s 是 u 的一个非空子集
}
```



## 四、使用bitset来操作更大的集合

如果要操作的集合非常大，那么可以使用bitset。动态规划的状态压缩DP就是使用位运算操作集合。